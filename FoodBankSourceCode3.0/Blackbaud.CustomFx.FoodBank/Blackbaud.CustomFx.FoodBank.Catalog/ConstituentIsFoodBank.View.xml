<ViewDataFormTemplateSpec 
    xmlns="bb_appfx_viewdataformtemplate"
    xmlns:common="bb_appfx_commontypes"
    ID="8FD5A71F-9686-4BD9-A63C-73BB81B74103"
    Name="Constituent Is Food Bank View Form"
    Description="Used to determine if a constituent (org) is a food bank."
    Author="Technical Training"
    DataFormInstanceID="23119D4E-3F04-4931-8219-A5AE9E3587B3"
    RecordType="Constituent"
    common:SecurityUIFolder="Constituent\Food Bank">

	<!-- define the SP that returns the data used by the form -->
	<SPDataForm SPName="USR_USP_DATAFORMTEMPLATE_VIEW_CONSTITUENTISFOODBANK">
		<common:CreateProcedureSQL>
			<![CDATA[
create procedure dbo.USR_USP_DATAFORMTEMPLATE_VIEW_CONSTITUENTISFOODBANK
(
@ID uniqueidentifier,
@DATALOADED bit = 0 output,
@ISFOODBANK bit = null output
)
as
		set nocount on;
	-- be sure to set this, in case the select returns no rows
	set @DATALOADED = 1
	set @ISFOODBANK = 0
	
		-- populate the output parameters, which correspond to fields on the form.  Note that
	-- we set @DATALOADED = 1 to indicate that the load was successful.  Otherwise, the system
	-- will display a "no data loaded" message.
	SELECT
		@ISFOODBANK = 1
	FROM
		dbo.CONSTITUENT C
	INNER JOIN
		dbo.USR_FOODBANK FB on C.ID = FB.ID
	where 
		C.ID = @ID
	
	return 0;
			]]>
		</common:CreateProcedureSQL>
	</SPDataForm>

	<!-- describe fields on the form, which correspond to parameters on the SP.  Note that system paramters 
	like the context @ID, @DATALOADED, and @CURRENTAPPUSERID need not be listed. -->
	<common:FormMetaData FixedDialog="true">
		<common:FormFields>
			<common:FormField FieldID="ISFOODBANK" Caption="ISFOODBANK" DataType="Boolean" />
		</common:FormFields>

    <!-- This view data form uses the OLD ClickOnce shell with dependencies on WinForm
    technology.  It will require upgrading through the creation of a UIModel for any
    UI presenation tier logic and HTML for custom layout of controls.  
    
		<common:FormUIComponent FormUIComponentType="CustomComponent" >
			<common:CustomComponentID AssemblyName="Blackbaud.CustomFx.FoodBank.Client.dll" 
      ClassName="Blackbaud.CustomFx.FoodBank.Client.FoodBankSummaryView"/>
		</common:FormUIComponent> -->

    <!-- This view data form is now ready for Web Shell/Web UI.   
    The WebUI tag contains a DefaultWebUI tag to signify the UI will be autogenerated
    by the Infinity platform.  Infinity will autogenerate the html for you using a simple layout 
    of ui controls within a single column.-->
        <common:WebUIComponent>
          <common:WebUI>
            <common:DefaultWebUI/>
          </common:WebUI>
        </common:WebUIComponent>
	</common:FormMetaData>
  
  

</ViewDataFormTemplateSpec>